<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belleza Neón - Tienda de Productos de Belleza</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0b0a10;
            --card: #141224;
            --ink: #e6e1ff;
            --brand: #8a2bff;
            --brand2: #b34dff;
            --glow: 0 0 18px rgba(138,43,255,.65), 0 0 42px rgba(179,77,255,.35);
            --success: #00c853;
            --error: #ff1744;
            --cart-bg: #1e1b38;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: radial-gradient(1200px 600px at 20% -10%, rgba(138,43,255,.15), transparent), var(--bg);
            color: var(--ink);
            font-family: 'Inter', system-ui, 'Segoe UI', Roboto, Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .topbar {
            position: sticky;
            top: 0;
            z-index: 20;
            display: flex;
            gap: 16px;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            background: rgba(11,10,16,.75);
            backdrop-filter: saturate(1.2) blur(10px);
            border-bottom: 1px solid rgba(255,255,255,.06);
        }

        .brand {
            font-size: 22px;
            letter-spacing: .4px;
        }

        .brand span {
            color: var(--brand);
            text-shadow: var(--glow);
        }

        .nav {
            display: flex;
            flex-wrap: nowrap;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 4px;
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        .nav::-webkit-scrollbar {
            display: none; /* Chrome, Safari and Opera */
        }

        .chip {
            background: #1b1830;
            color: var(--ink);
            border: 1px solid rgba(255,255,255,.08);
            padding: 8px 12px;
            border-radius: 999px;
            cursor: pointer;
            transition: .2s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .chip:hover {
            box-shadow: var(--glow);
            border-color: rgba(255,255,255,.18);
        }

        .chip.active {
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            box-shadow: var(--glow);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 24px;
            flex: 1;
        }

        .hero {
            background: linear-gradient(135deg, rgba(138,43,255,.18), rgba(179,77,255,.12));
            border: 1px solid rgba(255,255,255,.08);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 22px;
            box-shadow: var(--glow);
        }

        .hero h2 {
            margin: 0 0 6px 0;
            font-size: 28px;
        }

        .hero p {
            margin: 0;
            color: #d7cffc;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(1, minmax(0, 1fr));
            gap: 16px;
        }

        @media (min-width: 640px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 960px) {
            .grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .card {
            background: linear-gradient(180deg, #15122a, #0f0e1b);
            border: 1px solid rgba(255,255,255,.08);
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform .2s, box-shadow .2s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        .imgWrap {
            position: relative;
            aspect-ratio: 3/2;
            overflow: hidden;
        }

        .imgWrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            filter: saturate(1.1);
        }

        .info {
            padding: 14px;
        }

        .info h3 {
            margin: 0 0 6px 0;
            font-size: 16px;
        }

        .price {
            margin: 0 0 12px 0;
            font-weight: 700;
            color: #fff;
        }

        .stock {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: #bfb7ff;
        }

        .cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 14px;
            border-radius: 12px;
            text-decoration: none;
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            font-weight: 600;
            box-shadow: var(--glow);
            border: 1px solid rgba(255,255,255,.1);
            cursor: pointer;
            transition: filter 0.2s;
        }

        .cta:hover {
            filter: brightness(1.08);
        }

        .cta:disabled {
            background: #6c757d;
            cursor: not-allowed;
            box-shadow: none;
        }

        .footer {
            padding: 28px;
            text-align: center;
            color: #bfb7ff;
            border-top: 1px solid rgba(255,255,255,.06);
            margin-top: 24px;
        }

        /* Admin Button */
        .admin-btn {
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: var(--glow);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .admin-btn:hover {
            filter: brightness(1.1);
        }

        /* Cart Button */
        .cart-btn {
            position: relative;
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: var(--glow);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--error);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Cart Panel */
        .cart-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: var(--cart-bg);
            z-index: 1000;
            box-shadow: -5px 0 25px rgba(0,0,0,0.5);
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-panel.active {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,.1);
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,.05);
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .cart-item-price {
            color: var(--brand);
            font-weight: 700;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 6px;
        }

        .quantity-btn {
            background: rgba(255,255,255,.1);
            border: none;
            color: var(--ink);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-item-quantity {
            font-weight: 600;
        }

        .remove-btn {
            color: var(--error);
            background: none;
            border: none;
            cursor: pointer;
            margin-left: auto;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,.1);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 700;
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            box-shadow: var(--glow);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .checkout-btn:hover {
            filter: brightness(1.1);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Add to Cart Button */
        .add-to-cart {
            margin-top: 8px;
            width: 100%;
            justify-content: center;
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(11,10,16,.95);
            backdrop-filter: blur(8px);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .admin-panel.active {
            opacity: 1;
            pointer-events: all;
        }

        .admin-content {
            background: var(--card);
            border: 1px solid rgba(255,255,255,.1);
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--glow);
            position: relative;
        }

        .close-admin {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: var(--ink);
            font-size: 24px;
            cursor: pointer;
        }

        .admin-content h2 {
            margin-bottom: 20px;
            color: var(--brand);
            text-align: center;
        }

        .upload-area {
            border: 2px dashed rgba(138,43,255,.5);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            transition: border-color 0.3s;
            cursor: pointer;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--brand);
        }

        .upload-area i {
            font-size: 48px;
            color: var(--brand);
            margin-bottom: 12px;
        }

        .upload-area p {
            margin: 8px 0;
        }

        .upload-area input {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
        }

        .upload-btn {
            background: linear-gradient(90deg, var(--brand), var(--brand2));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: var(--glow);
            width: 100%;
            margin-top: 16px;
            transition: filter 0.2s;
        }

        .upload-btn:hover {
            filter: brightness(1.1);
        }

        .upload-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .manual-form {
            margin-top: 24px;
            display: grid;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: var(--brand);
        }

        .form-group input, .form-group select {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,.1);
            background: rgba(0,0,0,.2);
            color: var(--ink);
        }

        .status-message {
            padding: 12px;
            border-radius: 8px;
            margin-top: 16px;
            text-align: center;
            font-weight: 600;
        }

        .status-success {
            background: rgba(0,200,83,.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-error {
            background: rgba(255,23,68,.1);
            color: var(--error);
            border: 1px solid var(--error);
        }

        .product-list {
            margin-top: 24px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,.1);
            border-radius: 8px;
            padding: 12px;
        }

        .product-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,.05);
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .delete-btn {
            color: var(--error);
            cursor: pointer;
            background: none;
            border: none;
        }

        /* Excel Format Info */
        .excel-format {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,.2);
            border-radius: 8px;
            border-left: 4px solid var(--brand);
        }

        .excel-format h4 {
            margin-bottom: 10px;
            color: var(--brand);
        }

        .excel-format table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .excel-format th, .excel-format td {
            padding: 8px;
            text-align: left;
            border: 1px solid rgba(255,255,255,.1);
        }

        .excel-format th {
            background: rgba(138,43,255,.2);
        }

        /* Empty cart message */
        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: #bfb7ff;
        }

        .empty-cart i {
            font-size: 48px;
            margin-bottom: 16px;
            color: var(--brand);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header class="topbar">
        <h1 class="brand">Belleza<span>Neón</span></h1>
        <nav class="nav">
            <button class="chip active" data-filter="all">Todos</button>
            <button class="chip" data-filter="cepillos">Cepillos</button>
            <button class="chip" data-filter="shampoos">Shampoos</button>
            <button class="chip" data-filter="secadoras">Secadoras</button>
            <button class="chip" data-filter="planchas">Planchas</button>
            <button class="chip" data-filter="acrilicos-unas">Acrílicos Uñas</button>
        </nav>
        <div style="display: flex; gap: 10px;">
            <button class="cart-btn" id="cartBtn">
                <i class="fas fa-shopping-cart"></i>
                Carrito
                <span class="cart-count" id="cartCount">0</span>
            </button>
            <button class="admin-btn" id="adminBtn">
                <i class="fas fa-cog"></i> Admin
            </button>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h2>Brilla con estilo</h2>
            <p>Productos seleccionados. Compra directa por WhatsApp.</p>
        </section>
        <section class="grid" id="productGrid"></section>
    </main>

    <footer class="footer">
        <p>© 2025 BellezaNeón</p>
    </footer>

    <!-- Cart Panel -->
    <div class="overlay" id="overlay"></div>
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h3>Tu Carrito de Compras</h3>
            <button class="close-admin" id="closeCart"><i class="fas fa-times"></i></button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be populated here -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn">
                <i class="fab fa-whatsapp"></i> Comprar por WhatsApp
            </button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <button class="close-admin" id="closeAdmin"><i class="fas fa-times"></i></button>
            <h2><i class="fas fa-cog"></i> Panel de Administración</h2>
            
            <div class="upload-area" id="dropArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Subir archivo Excel</h3>
                <p>Haga clic o arrastre un archivo Excel (.xlsx) aquí</p>
                <input type="file" id="fileInput" accept=".xlsx, .xls, .csv">
            </div>
            
            <button class="upload-btn" id="processBtn" disabled>Procesar Archivo</button>
            
            <div class="excel-format">
                <h4>Formato requerido para el archivo Excel:</h4>
                <p>Las columnas deben estar en este orden exacto:</p>
                <table>
                    <thead>
                        <tr>
                            <th>Columna</th>
                            <th>Descripción</th>
                            <th>Ejemplo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>A: ID</td>
                            <td>Identificador único</td>
                            <td>P031</td>
                        </tr>
                        <tr>
                            <td>B: Nombre</td>
                            <td>Nombre del producto</td>
                            <td>Crema Hidratante Premium</td>
                        </tr>
                        <tr>
                            <td>C: Precio</td>
                            <td>Precio numérico</td>
                            <td>299</td>
                        </tr>
                        <tr>
                            <td>D: Categoría</td>
                            <td>cepillos, shampoos, secadoras, planchas, acrilicos-unas, otros</td>
                            <td>cepillos</td>
                        </tr>
                        <tr>
                            <td>E: URL Imagen</td>
                            <td>Enlace a la imagen</td>
                            <td>https://ejemplo.com/imagen.jpg</td>
                        </tr>
                        <tr>
                            <td>F: Cantidad</td>
                            <td>Stock disponible (número)</td>
                            <td>15</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="manual-form">
                <h3>Agregar producto manualmente</h3>
                <div class="form-group">
                    <label for="productId">ID del Producto</label>
                    <input type="text" id="productId" placeholder="Ej: P031">
                </div>
                <div class="form-group">
                    <label for="productName">Nombre del Producto</label>
                    <input type="text" id="productName" placeholder="Ej: Crema Hidratante Premium">
                </div>
                <div class="form-group">
                    <label for="productPrice">Precio</label>
                    <input type="number" id="productPrice" placeholder="Ej: 299">
                </div>
                <div class="form-group">
                    <label for="productCategory">Categoría</label>
                    <select id="productCategory">
                        <option value="cepillos">Cepillos</option>
                        <option value="shampoos">Shampoos</option>
                        <option value="secadoras">Secadoras</option>
                        <option value="planchas">Planchas</option>
                        <option value="acrilicos-unas">Acrílicos Uñas</option>
                        <option value="otros">Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productImage">URL de la Imagen</label>
                    <input type="text" id="productImage" placeholder="https://ejemplo.com/imagen.jpg">
                </div>
                <div class="form-group">
                    <label for="productQuantity">Cantidad en Stock</label>
                    <input type="number" id="productQuantity" placeholder="Ej: 15" value="10" min="0">
                </div>
                <button class="cta" id="addManualBtn">Agregar Producto</button>
            </div>
            
            <div class="product-list" id="productList">
                <h3>Productos Actuales</h3>
                <!-- Product list will be populated by JavaScript -->
            </div>
            
            <div id="statusMessage" class="status-message hidden"></div>
        </div>
    </div>

    <script>
        // Configuración
        const WAPP = '525618371510';

        // Cargar productos desde localStorage o usar los predeterminados
        let PRODUCTS = JSON.parse(localStorage.getItem('bellezaProducts')) || [
            {"id":"P001","name":"Cepillo iónico compacto","price":249,"category":"cepillos","img":"https://images.unsplash.com/photo-1596466596120-2a8e4b5d1a51?w=600&h=400&fit=crop","quantity":10},
            {"id":"P002","name":"Cepillo desenredante pro","price":199,"category":"cepillos","img":"https://images.unsplash.com/photo-1622560480654-d96214fdc887?w=600&h=400&fit=crop","quantity":8},
            {"id":"P003","name":"Cepillo térmico cerámica","price":289,"category":"cepillos","img":"https://images.unsplash.com/photo-1608571423902-eed4a5ad810c?w=600&h=400&fit=crop","quantity":5},
            {"id":"P004","name":"Cepillo redondo styling","price":259,"category":"cepillos","img":"https://images.unsplash.com/photo-1519415711931-702deacf5be2?w=600&h=400&fit=crop","quantity":12},
            {"id":"P005","name":"Cepillo masaje cuero cabelludo","price":149,"category":"cepillos","img":"https://images.unsplash.com/photo-1591378603223-e15c8466e044?w=600&h=400&fit=crop","quantity":7},
            {"id":"P006","name":"Cepillo plegable con espejo","price":129,"category":"cepillos","img":"https://images.unsplash.com/photo-1591378603223-e15c8466e044?w=600&h=400&fit=crop","quantity":3},
            {"id":"P007","name":"Shampoo nutritivo argán 500ml","price":329,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":20},
            {"id":"P008","name":"Shampoo matizador violeta 300ml","price":299,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":15},
            {"id":"P009","name":"Shampoo sin sulfatos 400ml","price":349,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":18},
            {"id":"P010","name":"Shampoo fortalecedor biotina","price":319,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":22},
            {"id":"P011","name":"Shampoo hidratación profunda","price":309,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":14},
            {"id":"P012","name":"Shampoo detox carbón activo","price":289,"category":"shampoos","img":"https://images.unsplash.com/photo-1591369822096-ffd140ec948a?w=600&h=400&fit=crop","quantity":9},
            {"id":"P013","name":"Secadora iónica 1800W","price":1299,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":6},
            {"id":"P014","name":"Secadora compacta viaje","price":799,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":4},
            {"id":"P015","name":"Secadora profesional 2200W","price":1699,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":2},
            {"id":"P016","name":"Secadora difusor rizos","price":1399,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":7},
            {"id":"P017","name":"Secadora silenciosa","price":1499,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":3},
            {"id":"P018","name":"Secadora turbo brush","price":1599,"category":"secadoras","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":5},
            {"id":"P019","name":"Plancha cerámica 1\"","price":999,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":8},
            {"id":"P020","name":"Plancha titanio 1.25\"","price":1399,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":4},
            {"id":"P021","name":"Plancha ondas S","price":1199,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":6},
            {"id":"P022","name":"Plancha mini viaje","price":699,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":10},
            {"id":"P023","name":"Plancha infrarroja","price":1499,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":3},
            {"id":"P024","name":"Plancha vapor pro","price":1599,"category":"planchas","img":"https://images.unsplash.com/photo-1595341888016-a392ef81b7de?w=600&h=400&fit=crop","quantity":2},
            {"id":"P025","name":"Acrílico cover nude 30g","price":249,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":25},
            {"id":"P026","name":"Monómero bajo olor 120ml","price":219,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":18},
            {"id":"P027","name":"Pincel kolinsky #8","price":349,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":12},
            {"id":"P028","name":"Tip natural almond 500pcs","price":199,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":30},
            {"id":"P029","name":"Líquido preparador PH","price":159,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":22},
            {"id":"P030","name":"Top coat no wipe","price":179,"category":"acrilicos-unas","img":"https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=600&h=400&fit=crop","quantity":17}
        ];

        // Carrito de compras
        let CART = JSON.parse(localStorage.getItem('bellezaCart')) || [];

        // Utilidades
        function price(n) { 
            return n.toLocaleString('es-MX', {style: 'currency', currency: 'MXN'}); 
        }

        function showStatus(message, isSuccess = true) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = isSuccess ? 'status-message status-success' : 'status-message status-error';
            statusEl.classList.remove('hidden');
            
            setTimeout(() => {
                statusEl.classList.add('hidden');
            }, 3000);
        }

        // Funciones de carrito
        function updateCartCount() {
            const count = CART.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function addToCart(product) {
            // Verificar si hay stock disponible
            const productInStock = PRODUCTS.find(p => p.id === product.id);
            if (productInStock.quantity <= 0) {
                showStatus('No hay stock disponible de ' + product.name, false);
                return;
            }
            
            const existingItem = CART.find(item => item.id === product.id);
            
            if (existingItem) {
                // Verificar que no exceda el stock disponible
                if (existingItem.quantity + 1 > productInStock.quantity) {
                    showStatus('No hay suficiente stock de ' + product.name, false);
                    return;
                }
                existingItem.quantity += 1;
            } else {
                CART.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    img: product.img,
                    quantity: 1
                });
            }
            
            localStorage.setItem('bellezaCart', JSON.stringify(CART));
            updateCartCount();
            showStatus(`${product.name} agregado al carrito`);
        }

        function removeFromCart(productId) {
            CART = CART.filter(item => item.id !== productId);
            localStorage.setItem('bellezaCart', JSON.stringify(CART));
            updateCartCount();
            renderCart();
        }

        function updateQuantity(productId, change) {
            const item = CART.find(item => item.id === productId);
            if (item) {
                const productInStock = PRODUCTS.find(p => p.id === productId);
                
                // Verificar que no exceda el stock disponible
                if (change > 0 && item.quantity + change > productInStock.quantity) {
                    showStatus('No hay suficiente stock disponible', false);
                    return;
                }
                
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    localStorage.setItem('bellezaCart', JSON.stringify(CART));
                    updateCartCount();
                    renderCart();
                }
            }
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (CART.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <p>Tu carrito está vacío</p>
                    </div>
                `;
                cartTotal.textContent = price(0);
                return;
            }
            
            let total = 0;
            cartItems.innerHTML = '';
            
            CART.forEach(item => {
                total += item.price * item.quantity;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.img}" alt="${item.name}">
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${price(item.price)}</div>
                        <div class="cart-item-actions">
                            <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                            <span class="cart-item-quantity">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                            <button class="remove-btn" onclick="removeFromCart('${item.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = price(total);
        }

        function checkout() {
            if (CART.length === 0) {
                showStatus('Tu carrito está vacío', false);
                return;
            }
            
            let message = "¡Hola! Me interesan los siguientes productos:%0A%0A";
            let total = 0;
            
            CART.forEach(item => {
                message += `- ${item.name} x${item.quantity} - ${price(item.price * item.quantity)}%0A`;
                total += item.price * item.quantity;
            });
            
            message += `%0ATotal: ${price(total)}%0A%0A`;
            message += "¿Podrían ayudarme con mi pedido?";
            
            const href = `https://wa.me/${WAPP}?text=${message}`;
            window.open(href, '_blank');
        }

        // Funciones de productos
        function card(p) {
            const isOutOfStock = p.quantity <= 0;
            return `
                <article class="card" data-cat="${p.category}">
                    <div class="imgWrap"><img src="${p.img}" alt="${p.name}" loading="lazy"></div>
                    <div class="info">
                        <h3>${p.name}</h3>
                        <p class="price">${price(p.price)}</p>
                        <p class="stock">${isOutOfStock ? '❌ Agotado' : `✅ En stock: ${p.quantity}`}</p>
                        <button class="cta add-to-cart" onclick="addToCart(${JSON.stringify(p).replace(/"/g, '&quot;')})" ${isOutOfStock ? 'disabled' : ''}>
                            <i class="fas fa-cart-plus"></i> ${isOutOfStock ? 'Agotado' : 'Agregar al carrito'}
                        </button>
                    </div>
                </article>`;
        }

        function render(filter = 'all') {
            const grid = document.getElementById('productGrid');
            const data = (filter === 'all') ? PRODUCTS : PRODUCTS.filter(p => p.category === filter);
            grid.innerHTML = data.map(card).join('');
            document.querySelectorAll('.chip').forEach(b => {
                b.classList.toggle('active', b.dataset.filter === filter);
            });
        }

        function updateProductList() {
            const productList = document.getElementById('productList');
            productList.innerHTML = '<h3>Productos Actuales (' + PRODUCTS.length + ')</h3>';
            
            PRODUCTS.forEach(product => {
                const item = document.createElement('div');
                item.className = 'product-item';
                item.innerHTML = `
                    <div>
                        <div>${product.name}</div>
                        <small>${price(product.price)} - Stock: ${product.quantity}</small>
                    </div>
                    <span>${product.category}</span>
                    <button class="delete-btn" data-id="${product.id}"><i class="fas fa-trash"></i></button>
                `;
                productList.appendChild(item);
            });
            
            // Agregar event listeners a los botones de eliminar
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    deleteProduct(id);
                });
            });
        }

        function saveProducts() {
            localStorage.setItem('bellezaProducts', JSON.stringify(PRODUCTS));
            render();
            updateProductList();
            showStatus('Productos guardados correctamente');
        }

        function addProduct(product) {
            // Verificar si el producto ya existe
            const existingIndex = PRODUCTS.findIndex(p => p.id === product.id);
            
            if (existingIndex >= 0) {
                // Actualizar producto existente
                PRODUCTS[existingIndex] = product;
                showStatus('Producto actualizado correctamente');
            } else {
                // Agregar nuevo producto
                PRODUCTS.push(product);
                showStatus('Producto agregado correctamente');
            }
            
            saveProducts();
        }

        function deleteProduct(id) {
            if (confirm('¿Estás seguro de que quieres eliminar este producto?')) {
                PRODUCTS = PRODUCTS.filter(p => p.id !== id);
                saveProducts();
            }
        }

        // Funciones para procesar Excel (simulado)
        function processExcelData(data) {
            // En una implementación real, aquí procesarías el archivo Excel
            // Para este ejemplo, simulamos datos de productos desde Excel
            try {
                // Simulamos la extracción de datos del Excel
                const newProducts = [
                    {id: "P031", name: "Kit Maquillaje Profesional", price: 899, category: "otros", img: "https://images.unsplash.com/photo-1596466596120-2a8e4b5d1a51?w=600&h=400&fit=crop", quantity: 10},
                    {id: "P032", name: "Paleta Sombras 12 colores", price: 459, category: "otros", img: "https://images.unsplash.com/photo-1591378603223-e15c8466e044?w=600&h=400&fit=crop", quantity: 15},
                    {id: "P033", name: "Base Líquida Full Cover", price: 399, category: "otros", img: "https://images.unsplash.com/photo-1622560480654-d96214fdc887?w=600&h=400&fit=crop", quantity: 8}
                ];
                
                // Agregar los nuevos productos
                newProducts.forEach(product => {
                    addProduct(product);
                });
                
                showStatus('Datos de Excel procesados correctamente. 3 productos agregados.');
            } catch (error) {
                showStatus('Error al procesar el archivo Excel: ' + error.message, false);
            }
        }

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar productos iniciales
            render();
            updateCartCount();
            
            // Configurar filtros
            document.querySelectorAll('.chip').forEach(b => {
                b.addEventListener('click', () => render(b.dataset.filter));
            });
            
            // Configurar carrito
            const cartBtn = document.getElementById('cartBtn');
            const cartPanel = document.getElementById('cartPanel');
            const closeCart = document.getElementById('closeCart');
            const overlay = document.getElementById('overlay');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            cartBtn.addEventListener('click', () => {
                renderCart();
                cartPanel.classList.add('active');
                overlay.classList.add('active');
            });
            
            closeCart.addEventListener('click', () => {
                cartPanel.classList.remove('active');
                overlay.classList.remove('active');
            });
            
            overlay.addEventListener('click', () => {
                cartPanel.classList.remove('active');
                overlay.classList.remove('active');
            });
            
            checkoutBtn.addEventListener('click', checkout);
            
            // Configurar panel de administración
            const adminBtn = document.getElementById('adminBtn');
            const adminPanel = document.getElementById('adminPanel');
            const closeAdmin = document.getElementById('closeAdmin');
            
            adminBtn.addEventListener('click', () => {
                adminPanel.classList.add('active');
                updateProductList();
            });
            
            closeAdmin.addEventListener('click', () => {
                adminPanel.classList.remove('active');
            });
            
            // Configurar subida de archivos
            const dropArea = document.getElementById('dropArea');
            const fileInput = document.getElementById('fileInput');
            const processBtn = document.getElementById('processBtn');
            
            dropArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            dropArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'var(--brand)';
            });
            
            dropArea.addEventListener('dragleave', () => {
                dropArea.style.borderColor = 'rgba(138,43,255,.5)';
            });
            
            dropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'rgba(138,43,255,.5)';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    processBtn.disabled = false;
                }
            });
            
            fileInput.addEventListener('change', () => {
                processBtn.disabled = !fileInput.files.length;
            });
            
            processBtn.addEventListener('click', () => {
                if (fileInput.files.length) {
                    processExcelData(null); // En una implementación real, pasarías el archivo
                }
            });
            
            // Configurar formulario manual
            const addManualBtn = document.getElementById('addManualBtn');
            
            addManualBtn.addEventListener('click', () => {
                const id = document.getElementById('productId').value.trim();
                const name = document.getElementById('productName').value.trim();
                const price = parseInt(document.getElementById('productPrice').value);
                const category = document.getElementById('productCategory').value;
                const img = document.getElementById('productImage').value.trim();
                const quantity = parseInt(document.getElementById('productQuantity').value) || 0;
                
                if (!id || !name || isNaN(price) || !img || isNaN(quantity)) {
                    showStatus('Por favor, complete todos los campos correctamente', false);
                    return;
                }
                
                const newProduct = {
                    id: id,
                    name: name,
                    price: price,
                    category: category,
                    img: img,
                    quantity: quantity
                };
                
                addProduct(newProduct);
                
                // Limpiar formulario
                document.getElementById('productId').value = '';
                document.getElementById('productName').value = '';
                document.getElementById('productPrice').value = '';
                document.getElementById('productImage').value = '';
                document.getElementById('productQuantity').value = '10';
            });
        });
    </script>
</body>
</html>



